
//                               █         █    █            ▄▄▄▀▀▀▀▀▀▄▄▄        █▀▀▀▀▀▀▀▀▀▀█
//                               █        █     █          ▄▀            ▀▄      █          █
//                               █       █      █        ▄▀                ▀▄    █          █
//                               █      █       █        █                  █    █          █
//                               █     █        █       █                    █   █          █
//                               █    █         █       █                    █   █▄▄▄▄▄▄▄▄▄▄█
//                               █   █ █        █       █                    █   █      █
//                               █  █   █       █        █                  █    █       █
//                               █ █     █      █        ▀▄                ▄▀    █        █
//                               ██       █     █          ▀▄            ▄▀      █         █
//                               █         █    █▄▄▄▄▄▄▄▄    ▀▀▀▄▄▄▄▄▄▀▀▀        █          █
//
// ▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄
       
#include <behaviors.dtsi>
#include <dt-bindings/zmk/keys.h>
#include <dt-bindings/zmk/bt.h>
#include <dt-bindings/zmk/outputs.h>
#include <dt-bindings/zmk/ext_power.h>
#include <dt-bindings/zmk/rgb.h>
#include "keymap_french.h"
#include "helper.h"
#include "french_unicode.h"


#define Default   0
#define NumArr    1
#define Unic      2
#define Fun       3
#define Media     4
#define Mouse     5
#define Gaming    6


/ {
    behaviors {
        hm: homerow_mods {
            compatible = "zmk,behavior-hold-tap";
            label = "HOMEROW_MODS";
            #binding-cells = <2>;
            tapping-term-ms = <150>;
            quick_tap_ms = <0>;
            flavor = "tap-preferred";
            bindings = <&kp>, <&kp>;
        };

    };

     combos {
            compatible = "zmk,combos";
            combo_esc {
                timeout-ms = <50>;
                key-positions = <0 1>;
                bindings = <&kp ESC>;
            };
            combo_ae {
                timeout-ms = <50>;
                key-positions = <0 2>;
                bindings = <&ae>;
            };
            combo_oe {
                timeout-ms = <50>;
                key-positions = <0 8>;
                bindings = <&oe>;
            };
    };



        keymap {
                compatible = "zmk,keymap";


// ▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄


                Default_layer {
// ┌───────────────────────────────────────────────────────────┐
label= "Default"                                               ;
// └───────────────────────────────────────────────────────────┘
/*             ┌───────────┬───────────┬───────────┬───────────┬───────────┐                      ┌───────────┬───────────┬───────────┬───────────┬───────────┐
               │     A     │     Z     │     E     │     R     │     T     │                      │     Y     │     U     │     I     │     O     │     P     │
   ┌───────────┼───────────┼───────────┼───────────┼───────────┼───────────┤                      ├───────────┼───────────┼───────────┼───────────┼───────────┼───────────┐
   │    TAB    │     Q     │     S     │     D     │     F     │     G     │                      │     H     │     J     │     K     │     L     │     M     │     "     │
   ├───────────┼───────────┼───────────┼───────────┼───────────┼───────────┤╭─────────╮╭─────────╮├───────────┼───────────┼───────────┼───────────┼───────────┼───────────┤
   │    DEL    │     W     │     X     │     C     │     V     │     B     ││   MUTE  ││ PLY/PSE ││     N     │     ,     │     ;     │     :     │     !     │     \     │
   └───────────┴───────────┴───────────┼───────────┼───────────┼───────────┼╰─────────╯╰─────────╯┼───────────┼───────────┼───────────┼───────────┴───────────┴───────────┘
                                       │    DEL    │    TAB    │   SPACE   │   CTRL   ││   ALT    │   SPACE   │    BSPC   │    GUI    │
                                       └───────────┴───────────┴───────────┴──────────┘└──────────┴───────────┴───────────┴───────────┘ */
 bindings = <
 //╷            ╷            ╷            ╷            ╷            ╷            ╷            ╷╷            ╷            ╷            ╷            ╷            ╷            ╷            ╷
                 &kp FR_A     &kp FR_Z     &kp E        &kp R        &kp T                                   &kp Y        &kp U        &kp I        &kp O        &kp P
    &kp LPAR     &kp FR_Q     &kp S        &kp D        &kp F        &kp G                                   &kp H        &kp J        &kp K        &kp L        &kp FR_M     &lt Media RPAR
    &kp LC(LSHFT)&kp FR_W     &kp X        &kp C        &kp V        &kp B        &trans        &trans       &kp N        &kp FR_COMM  &kp FR_SCLN  &kp FR_COLN  &kp FR_EXLM  &lt Fun FR_CIRC
                                           &kp DEL      &lt Unic TAB &mt LSHFT RET &mt LCTRL ESC &mt LALT A &mt LSHFT SPACE &lt NumArr BSPC &kp LGUI
                        >;
            sensor-bindings = <&inc_dec_kp C_VOL_UP C_VOL_DN>;
                };


// ▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄


                NumArr_layer {
// ┌───────────────────────────────────────────────────────────┐
label= "NumArr"                                                ;
// └───────────────────────────────────────────────────────────┘
/*             ┌───────────┬───────────┬───────────┬───────────┬───────────┐                      ┌───────────┬───────────┬───────────┬───────────┬───────────┐
               │     6     │     7     │     8     │     9     │     0     │                      │   PG_UP   │   QUOT    │     UP    │    DQUO   │   HOME    │
   ┌───────────┼───────────┼───────────┼───────────┼───────────┼───────────┤                      ├───────────┼───────────┼───────────┼───────────┼───────────┼───────────┐
   │    TAB    │     1     │     2     │     3     │     4     │     5     │                      │   PG_DN   │    LEFT   │    DOWN   │   RIGHT   │    END    │     "     │
   ├───────────┼───────────┼───────────┼───────────┼───────────┼───────────┤╭─────────╮╭─────────╮├───────────┼───────────┼───────────┼───────────┼───────────┼───────────┤
   │    DEL    │     /     │     *     │     -     │     +     │     =     ││         ││         ││     [     │     ]     │     {     │     }     │     <     │     >     │
   └───────────┴───────────┴───────────┼───────────┼───────────┼───────────┼╰─────────╯╰─────────╯┼───────────┼───────────┼───────────┼───────────┴───────────┴───────────┘
                                       │           │           │           │          ││          │           │           │           │
                                       └───────────┴───────────┴───────────┴──────────┘└──────────┴───────────┴───────────┴───────────┘ */
 bindings = <
 //╷            ╷            ╷            ╷            ╷            ╷            ╷            ╷╷            ╷            ╷            ╷            ╷            ╷            ╷            ╷
                 &kp FR_6     &kp FR_7     &kp FR_8     &kp FR_9     &kp FR_0                                &kp PG_UP    &kp FR_QUOT  &kp UP       &kp FR_DQUO  &kp HOME
    &kp PRCNT    &kp FR_1     &kp FR_2     &kp FR_3     &kp FR_4     &kp FR_5                                &kp PG_DN    &kp LEFT     &kp DOWN     &kp RIGHT    &kp END      &kp SQT
    &trans       &kp FSLH     &kp STAR     &kp MINUS    &kp PLUS     &kp EQUAL    &trans        &trans       &kp FR_LBRC  &kp FR_RBRC  &kp FR_LCBR  &kp FR_RCBR  &kp FR_LABK  &kp FR_RABK
                                           &trans       &trans       &trans       &trans        &trans       &trans       &trans       &trans 
                        >;
            sensor-bindings = <&inc_dec_kp C_VOL_UP C_VOL_DN>;
                };


// ▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄


                Unic_layer {
// ┌───────────────────────────────────────────────────────────┐
label= "Unic"                                                  ;
// └───────────────────────────────────────────────────────────┘
/*             ┌───────────┬───────────┬───────────┬───────────┬───────────┐                      ┌───────────┬───────────┬───────────┬───────────┬───────────┐
               │           │           │           │           │           │                      │           │           │           │           │           │
   ┌───────────┼───────────┼───────────┼───────────┼───────────┼───────────┤                      ├───────────┼───────────┼───────────┼───────────┼───────────┼───────────┐
   │           │           │           │           │           │           │                      │           │           │           │           │           │           │
   ├───────────┼───────────┼───────────┼───────────┼───────────┼───────────┤╭─────────╮╭─────────╮├───────────┼───────────┼───────────┼───────────┼───────────┼───────────┤
   │           │           │           │           │           │           ││         ││         ││           │           │           │           │           │           │
   └───────────┴───────────┴───────────┼───────────┼───────────┼───────────┼╰─────────╯╰─────────╯┼───────────┼───────────┼───────────┼───────────┴───────────┴───────────┘
                                       │           │           │           │          ││          │           │           │           │
                                       └───────────┴───────────┴───────────┴──────────┘└──────────┴───────────┴───────────┴───────────┘ */
 bindings = <
 //╷            ╷            ╷            ╷            ╷            ╷            ╷            ╷╷            ╷            ╷            ╷            ╷            ╷            ╷            ╷
                 &agr         &egr         &eaig        &none        &none                                   &none        &ugrav       &none        &none        &none
    &none        &none        &none        &none        &none        &none                                   &none        &none        &none        &none        &none        &none
    &none        &none        &none        &none        &none        &none        &none         &none        &none        &none        &none        &none        &none        &none
                                           &kp DEL      &lt Unic TAB &mt LSHFT RET &mt LCTRL ESC &mt LALT A &mt LSHFT SPACE &lt NumArr BSPC &kp LGUI
                        >;
            sensor-bindings = <&inc_dec_kp C_VOL_UP C_VOL_DN>;
                };


// ▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄


                Fun_layer {
// ┌───────────────────────────────────────────────────────────┐
label= "Fun"                                                   ;
// └───────────────────────────────────────────────────────────┘
/*             ┌───────────┬───────────┬───────────┬───────────┬───────────┐                      ┌───────────┬───────────┬───────────┬───────────┬───────────┐
               │     Q     │     F9    │    F10    │    F11    │    F12    │                      │     Y     │     U     │     I     │     O     │     P     │
   ┌───────────┼───────────┼───────────┼───────────┼───────────┼───────────┤                      ├───────────┼───────────┼───────────┼───────────┼───────────┼───────────┐
   │    TAB    │     A     │     F5    │    F6     │    F7     │    F8     │                      │     H     │     J     │     K     │     L     │     M     │     "     │
   ├───────────┼───────────┼───────────┼───────────┼───────────┼───────────┤╭─────────╮╭─────────╮├───────────┼───────────┼───────────┼───────────┼───────────┼───────────┤
   │    DEL    │     Z     │     F1    │    F2     │    F3     │    F4     ││         ││         ││     N     │     ,     │     ;     │     :     │     !     │     \     │
   └───────────┴───────────┴───────────┼───────────┼───────────┼───────────┼╰─────────╯╰─────────╯┼───────────┼───────────┼───────────┼───────────┴───────────┴───────────┘
                                       │           │           │           │          ││          │           │           │           │
                                       └───────────┴───────────┴───────────┴──────────┘└──────────┴───────────┴───────────┴───────────┘ */
 bindings = <
 //╷            ╷            ╷            ╷            ╷            ╷            ╷            ╷╷            ╷            ╷            ╷            ╷            ╷            ╷            ╷
                 &kp FR_A     &kp F9       &kp F10      &kp F11      &kp F12                                 &kp Y        &kp U        &kp I        &kp O        &kp P
    &trans       &kp FR_Q     &kp F5       &kp F6       &kp F7       &kp F8                                  &kp H        &kp J        &kp K        &kp L        &kp FR_M     &trans
    &trans       &kp FR_W     &kp F1       &kp F2       &kp F3       &kp F4       &trans        &trans       &kp N        &kp FR_COMM  &kp FR_SCLN  &kp FR_COLN  &kp FR_EXLM  &trans
                                           &trans       &trans       &trans       &trans        &trans       &trans       &trans       &trans 
                        >;
            sensor-bindings = <&inc_dec_kp C_VOL_UP C_VOL_DN>;
                };


// ▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄


                Media_layer {
// ┌───────────────────────────────────────────────────────────┐
label= "Media"                                                 ;
// └───────────────────────────────────────────────────────────┘
/*             ┌───────────┬───────────┬───────────┬───────────┬───────────┐                      ┌───────────┬───────────┬───────────┬───────────┬───────────┐
               │           │           │           │           │           │                      │           │    ⏹︎	  │    ⏶︎	  │    ⏯︎	  │           │
   ┌───────────┼───────────┼───────────┼───────────┼───────────┼───────────┤                      ├───────────┼───────────┼───────────┼───────────┼───────────┼───────────┐
   │  Gaming   │           │           │           │           │           │                      │    ⏪︎	  │    ⏮︎	  │    ⏷︎	  │    ⏭︎	  │    ⏩︎	  │           │
   ├───────────┼───────────┼───────────┼───────────┼───────────┼───────────┤╭─────────╮╭─────────╮├───────────┼───────────┼───────────┼───────────┼───────────┼───────────┤
   │           │           │           │           │           │           ││         ││         ││           │           │           │           │           │           │
   └───────────┴───────────┴───────────┼───────────┼───────────┼───────────┼╰─────────╯╰─────────╯┼───────────┼───────────┼───────────┼───────────┴───────────┴───────────┘
                                       │           │           │           │          ││          │           │           │           │
                                       └───────────┴───────────┴───────────┴──────────┘└──────────┴───────────┴───────────┴───────────┘ */
 bindings = <
 //╷            ╷            ╷            ╷            ╷            ╷            ╷            ╷╷            ╷            ╷            ╷            ╷            ╷            ╷            ╷
                 &none        &none        &none        &none        &none                                   &none        &kp U        &kp C_VOL_UP &kp C_PP     &none
    &to Gaming   &none        &none        &none        &none        &none                                   &kp C_RW     &kp C_PREV   &kp C_VOL_DN &kp C_NEXT   &kp C_FF     &none
    &none        &none        &none        &none        &none        &none        &trans        &trans       &none        &none        &none        &none        &none        &none
                                           &trans       &trans       &trans       &trans        &trans       &trans       &trans       &trans 
                        >;
            sensor-bindings = <&inc_dec_kp C_VOL_UP C_VOL_DN>;
                };


// ▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄


                Mouse_layer {
// ┌───────────────────────────────────────────────────────────┐
label= "Mouse"                                                 ;
// └───────────────────────────────────────────────────────────┘
/*             ┌───────────┬───────────┬───────────┬───────────┬───────────┐                      ┌───────────┬───────────┬───────────┬───────────┬───────────┐
               │           │           │           │           │           │                      │           │           │           │           │           │
   ┌───────────┼───────────┼───────────┼───────────┼───────────┼───────────┤                      ├───────────┼───────────┼───────────┼───────────┼───────────┼───────────┐
   │           │           │           │           │           │           │                      │           │           │           │           │           │           │
   ├───────────┼───────────┼───────────┼───────────┼───────────┼───────────┤╭─────────╮╭─────────╮├───────────┼───────────┼───────────┼───────────┼───────────┼───────────┤
   │           │           │           │           │           │           ││         ││         ││           │           │           │           │           │           │
   └───────────┴───────────┴───────────┼───────────┼───────────┼───────────┼╰─────────╯╰─────────╯┼───────────┼───────────┼───────────┼───────────┴───────────┴───────────┘
                                       │           │           │           │          ││          │           │           │           │
                                       └───────────┴───────────┴───────────┴──────────┘└──────────┴───────────┴───────────┴───────────┘ */
 bindings = <
 //╷            ╷            ╷            ╷            ╷            ╷            ╷            ╷╷            ╷            ╷            ╷            ╷            ╷            ╷            ╷
                 &none        &none        &none        &none        &none                                   &none        &none        &none        &none        &none
    &none        &none        &none        &none        &none        &none                                   &none        &none        &none        &none        &none        &none
    &none        &none        &none        &none        &none        &none        &none         &none        &none        &none        &none        &none        &none        &none
                                           &trans       &trans       &trans       &trans        &trans       &trans       &trans       &trans 
                        >;
            sensor-bindings = <&inc_dec_kp C_VOL_UP C_VOL_DN>;
                };


// ▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄


                Gaming_layer {
// ┌───────────────────────────────────────────────────────────┐
label= "Gaming"                                                ;
// └───────────────────────────────────────────────────────────┘
/*             ┌───────────┬───────────┬───────────┬───────────┬───────────┐                      ┌───────────┬───────────┬───────────┬───────────┬───────────┐
               │     Q     │     W     │     E     │     R     │     T     │                      │           │           │           │           │           │
   ┌───────────┼───────────┼───────────┼───────────┼───────────┼───────────┤                      ├───────────┼───────────┼───────────┼───────────┼───────────┼───────────┐
   │    TAB    │     A     │     S     │     D     │     F     │     G     │                      │           │           │           │           │           │           │
   ├───────────┼───────────┼───────────┼───────────┼───────────┼───────────┤╭─────────╮╭─────────╮├───────────┼───────────┼───────────┼───────────┼───────────┼───────────┤
   │    DEL    │     Z     │     X     │     C     │     V     │     B     ││         ││         ││           │           │           │           │           │           │
   └───────────┴───────────┴───────────┼───────────┼───────────┼───────────┼╰─────────╯╰─────────╯┼───────────┼───────────┼───────────┼───────────┴───────────┴───────────┘
                                       │    ESC    │     2     │   SPACE   │    1     ││  ENTER   │  Default  │           │           │
                                       └───────────┴───────────┴───────────┴──────────┘└──────────┴───────────┴───────────┴───────────┘ */
 bindings = <
 //╷            ╷            ╷            ╷            ╷            ╷            ╷            ╷╷            ╷            ╷            ╷            ╷            ╷            ╷            ╷
                 &kp TAB      &kp FR_A     &kp FR_Z     &kp E        &kp R                                   &none        &none        &none        &none        &none
    &kp LSHFT    &kp FR_3     &kp FR_Q     &kp S        &kp D        &kp F                                   &none        &none        &none        &none        &none        &none
    &kp LCTRL    &kp FR_4     &kp FR_W     &kp X        &kp C        &kp V        &trans        &trans       &none        &none        &none        &none        &none        &none
                                           &kp ESC      &kp FR_2     &kp SPACE    &kp FR_1      &kp RET      &to Default  &none        &none
                        >;
            sensor-bindings = <&inc_dec_kp C_VOL_UP C_VOL_DN>;
                };

        };
};